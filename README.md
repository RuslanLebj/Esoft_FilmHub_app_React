[Документация для неофициального API кинопоиска (kinopoisk.dev).](https://api.kinopoisk.dev/documentation#/%D0%A4%D0%B8%D0%BB%D1%8C%D0%BC%D1%8B%2C%20%D1%81%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%8B%2C%20%D0%B8%20%D1%82.%D0%B4./MovieController_findManyByQueryV1_4)

# Проект: Kinopoisk client

## Описание проекта

Kinopoisk client — это веб-приложение, использующее неофициальное API кинопоиска, позволяющее пользователям искать
фильмы по названию или жанрам, сортировать по рейтингу и просматривать детальную информацию о выбранном кино.

[Документация для неофициального API кинопоиска (kinopoisk.dev).](https://api.kinopoisk.dev/documentation#/%D0%A4%D0%B8%D0%BB%D1%8C%D0%BC%D1%8B%2C%20%D1%81%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%8B%2C%20%D0%B8%20%D1%82.%D0%B4./MovieController_findManyByQueryV1_4)

## Структура проекта

Проект организован следующим образом:

- **public/**: Публичные статические файлы.
- **src/**
    - **assets/**: Ресурсы проекта (изображения, шрифты и т.д.).
    - **components/**: Компоненты приложения.
        - **buttons/**: Компоненты кнопок.
            - `AcceptButton.jsx`
            - `CancelButton.jsx`
            - `IconButton.jsx`
            - `TagButton.jsx`
        - **cards/**: Компоненты карточек.
            - **commentCard/**
                - `CommentCard.jsx`
            - **movieCard/**
                - `MovieCard.jsx`
        - **details/**: Компоненты деталей.
            - **movieDetail/**
                - `MovieDetail.jsx`
        - **forms/**: Компоненты форм.
            - **commentForm/**
                - `CommentForm.jsx`
        - **lists/**: Компоненты списков.
            - **commentList/**
                - `CommentList.jsx`
            - **genreList/**
                - `GenreList.jsx`
            - **movieList/**
                - `MovieList.jsx`
        - **sections/**: Секционные компоненты.
            - **commentsSection/**
                - `CommentsSection.jsx`
            - **similarMoviesSection/**
                - `SimilarMoviesSection.jsx`
        - **titles/**: Компоненты заголовков.
            - **pageTitle/**
                - `PageTitle.jsx`
    - **layout/**: Компоненты для общего макета.
        - **footer/**
            - `Footer.jsx`
        - **navbar/**
            - `Navbar.jsx`
        - **sidebar/**
            - `Sidebar.jsx`
            - `Layout.jsx`
    - **pages/**: Страницы приложения.
        - **errorPage/**
            - `ErrorPage.jsx`
            - `errorTexts.js`
        - **loadingPage/**
            - `LoadingPage.jsx`
            - `loadingTexts.js`
        - **movieDetailPage/**
            - `MovieDetailPage.jsx`
        - **movieListPage/**
            - `MovieListPage.jsx`
    - **router/**
        - `Router.jsx`: Настройка маршрутизации.
    - **store/**: Хранилище Redux.
        - **slices/**
            - `moviesSlice.js`: Redux slice для управления состоянием фильмов.
        - `store.js`: Настройка хранилища Redux.
    - **utils/**: Вспомогательные утилиты.
        - `axiosInstance.js`: Настройка Axios для выполнения HTTP-запросов.
    - `App.css`: Стили приложения.
    - `App.jsx`: Главный компонент приложения.
    - `config.js`: Конфигурационные файлы.
    - `index.css`: Основные стили.
    - `main.jsx`: Точка входа в приложение.

- **.env**: Переменные окружения - необходимо создать вручную для хранения secret key для доступа к API.
- **.eslintrc.cjs**: Конфигурация ESLint.
- **.gitignore**: Файл для игнорируемых Git файлов.
- `index.html`: Основной HTML файл.
- `package.json`: Файл с зависимостями проекта.
- `package-lock.json`: Автоматически сгенерированный файл для блокировки версий зависимостей.
- `postcss.config.js`: Конфигурация PostCSS.
- `README.md`: Файл с документацией проекта.
- `tailwind.config.js`: Конфигурация Tailwind CSS.
- `vite.config.js`: Конфигурация Vite.

## Функциональность

- **Показ популярных фильмов**
    - Пользователь может получить топ 250 самых популярных фильмов.
- **Поиск фильмов по названию**
    - Пользователь может ввести название фильма в поле поиска, и список фильмов будет обновлен с учетом введенного
      запроса.
- **Фильтрация по жанрам**
    - Пользователь может выбрать один или несколько жанров из мультиселекта или же нажать на соотвествующую кнопку жанра
      на карточке, и список фильмов будет отфильтрован по выбранным жанрам.
- **Сортировка по рейтингу IMDb**
    - Пользователь может нажать кнопку сортировки по рейтингу IMDb, и фильмы будут отсортированы в порядке убывания
      рейтинга.
- **Добавление фильма в избранное**
    - Пользователь может нажать кнопку избранного (в виде сердечка) на карточке фильма и добавить фильм в соответсвующий
      список
- **Добавление фильма в посмотреть позже**
    - Пользователь может нажать посмотреть позже (в виде закладки) на карточке фильма и добавить фильм в соответсвующий
      список
- **Рекомендации по фильмам**
    - Пользователь может получить рекомендации (похожие по жанрам фильмы) на странице детальной информации каждого
      фильма
- **Комментарии**
    - Пользователь может оставить или удалить свой комментарий (оствленный анонимно)

## Redux Toolkit Slice (moviesSlice.js)

- **initialState**
    - `loading` - состояние загрузки данных.
    - `data` - массив с данными фильмов.
    - `error` - сообщение об ошибке.
    - `favorites` - массив с ID избранных фильмов.
    - `watch_later` - массив с ID фильмов, которые пользователь хочет посмотреть позже.
    - `filters` - объект фильтров для поиска фильмов.
    - `movie_list_name` - название текущего списка фильмов.
    - `current_movie` - данные текущего фильма.
    - `comments` - комментарии к фильмам.
    - `genre_options` - список жанров для мультиселетка.
- **reducers**
    - `addToFavorites` - добавляет фильм в избранное.
    - `removeFromFavorites` - удаляет фильм из избранного.
    - `addToWatchLater` - добавляет фильм в список "посмотреть позже".
    - `removeFromWatchLater` - удаляет фильм из списка "посмотреть позже".
    - `setFilters` - устанавливает фильтры для поиска фильмов.
    - `setMovieListName` - устанавливает название текущего списка фильмов.
    - `addComment` - добавляет комментарий к фильму.
    - `removeComment` - удаляет комментарий к фильму.
    - `sortMoviesByRating` - сортирует фильмы по рейтингу IMDb.
- **extraReducers**
    - Обрабатывают асинхронные действия, такие как `fetchMovies`, `fetchMovieById`, `fetchMoviesByName`.

## Основные компоненты

- **Navbar**
    - Содержит поле поиска по названию, мультиселект для фильтрации по жанрам и кнопку сортировки по рейтингу IMDb.
- **Sidebar**
    - Содержит кнопки для перехода к популярным, любимым и "посмотреть позже" фильмам
- **MovieListPage**
    - Отображает список фильмов с учетом текущих фильтров и сортировки.
- **MovieDetailPage**
    - Отображает детальную информацию о фильме (название, постер, описание, рейтинг, жанры, актеры) похожие по жанрам
      фильмы, комментарии.

## Пример использования

1. Введите название фильма в поле поиска и нажмите Enter для обновления списка фильмов.
2. Выберите жанры из мультиселекта для фильтрации списка фильмов.
3. Нажмите кнопку "Сортировать по рейтингу IMDb" для сортировки фильмов по рейтингу.

## Установка и запуск проекта

1. **Склонируйте репозиторий:**
   ```bash
   git clone https://github.com/RuslanLebj/Esoft_Kinopoisk_client_React
   ```
2. **Установите зависимости:**
   ```bash
   npm install
   ```
3. **Установка secret key для доступа к API**
   - Создайте файл .env в корневом каталоге проекта и добавьте ваш секретный ключ:
      ```bash
      VITE_API_KEY="your_secret_key_here"
      ```
4. **Запуск приложения:**

   - Запускает приложение в режиме разработки с помощью Vite. Этот режим включает инструменты для разработки, такие как
     горячая перезагрузка и подробные сообщения об ошибках. Используйте эту команду, чтобы начать работу над проектом и
     видеть изменения в реальном времени.
      ```bash
      npm run dev
      ```
   - Создает оптимизированную сборку для продакшена с помощью Vite. Этот режим минимизирует код и создает статические файлы
     для развертывания. Используйте эту команду перед тем, как развертывать приложение на сервере.
      ```bash
      npm run build
      ```
   - Запускает ESLint для проверки кода на наличие ошибок и несоответствий с принятыми стилями кодирования. Эта команда
     помогает поддерживать качество кода и стандарты кодирования в проекте. Команда проверяет файлы с расширениями .js и
     .jsx и сообщает о любых нарушениях правил.
      ```bash
      npm run lint
      ```
   - Запускает локальный сервер для предварительного просмотра оптимизированной сборки. Эта команда позволяет вам увидеть,
     как приложение будет работать в продакшене, без необходимости развертывать его на сервере.
      ```bash
      npm run preview
      ```

## Вопросы:

- Хотел бы подробнее узнать о работе с библиотеками по типу Tailwindcss,
  не всегда понятно когда стоит декомпозировать что-либо на компоненты для переиспользования, и насчет использования
  @apply - не является ли это чем-то сложно отлаживаемым наподобие bad practice с mixins? Может быть есть какой-либо
  полезный ресурс по этой теме?
  Нашел несколько ресурсов частично поднимающих эти темы, но не уверен в объективности:
  https://habr.com/ru/sandbox/209782/, https://habr.com/ru/companies/sbermarket/articles/737474/
